@startuml
!theme vibrant

title Sequence Diagram: Admin Views and Filters System Logs

actor Admin
participant Browser
participant "localStorage" as LocalStorage
participant "API Gateway" as Gateway
participant "Logging Service" as LoggingService
database "LogsDB"

activate Browser
Admin -> Browser : Navigates to /admin/logs\nand applies filters

alt Logs are cached in localStorage

    Browser ->> LocalStorage : Get cached logs
    activate LocalStorage
    LocalStorage -->> Browser : [Cached Log Documents]
    deactivate LocalStorage

    Browser -> Admin : Display filtered logs from cache

else Fetch logs from server

    Browser ->> Gateway : GET /api/admin/logs\n(headers: {Authorization: Bearer JWT}, body: {filterParams})
    activate Gateway

    Gateway -> Gateway : Verify JWT (ensure admin privileges)
    Gateway ->> LoggingService : getLogs(filterParams)
    activate LoggingService

    LoggingService ->> LogsDB : find(query)
    activate LogsDB
    LogsDB -->> LoggingService : [Log Documents]
    deactivate LogsDB

    alt Logs found on server
        LoggingService -->> Gateway : 200 OK { logs: [...] }
        Gateway -->> Browser : Response (200 OK with log data)
        Browser ->> LocalStorage : Cache new logs
        activate LocalStorage
        deactivate LocalStorage
    else No logs match on server
        LoggingService -->> Gateway : 200 OK { logs: [] }
        Gateway -->> Browser : Response (200 OK with empty array)
    end

    deactivate LoggingService
    deactivate Gateway

    Browser -> Admin : Display fetched logs in a table or list

end

deactivate Browser

@enduml
